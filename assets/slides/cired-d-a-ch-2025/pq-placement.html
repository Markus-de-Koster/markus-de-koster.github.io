<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PQ‑Placement</title>

  <!-- Tailwind and Plotly are loaded from CDNs.  -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>

  <style>
    /*
      Custom styles are defined here rather than inline on elements.
      Responsive padding and margin classes minimise unused white space on small screens.
    */
    body {
      background-color: #f3f4f6;
    }

    /* container uses full width on small devices and centres itself on larger screens */
    .outer-container {
      width: 100%;
      margin: 0;
      padding: 1rem; /* tailwind p-4 */
      background-color: #ffffff;
      border-radius: 1rem; /* tailwind rounded-2xl */
      /* tailwind shadow-2xl approximation */
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    @media (min-width: 640px) {
      .outer-container {
        padding: 1.5rem; /* tailwind sm:p-6 */
      }
    }
    @media (min-width: 768px) {
      .outer-container {
        padding: 2rem; /* tailwind md:p-8 */
        max-width: 72rem; /* tailwind max-w-6xl */
        margin-left: auto;
        margin-right: auto;
      }
    }
    @media (min-width: 1024px) {
      .outer-container {
        padding: 2.5rem; /* tailwind lg:p-10 */
      }
    }

    /* indicator arrow defaults */
    #indicatorArrow {
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-bottom: 6px solid transparent;
      border-left: 8px solid black;
      position: absolute;
      transition: all 0.3s ease-out;
      z-index: 20;
    }

    @media (max-width: 768px) {
      #heatmapWrapper {
        flex-direction: column;
        width: 100%;
        margin-top: 20px;
      }

      #heatmapContainer {
        flex-direction: column !important;
        align-items: center;
        width: 100%;
      }

      #heatmapBar {
        height: 12px !important;
        width: 100% !important;
        background: linear-gradient(to right, white, rgb(255, 200, 200), rgb(255, 0, 0), rgb(160, 0, 0)) !important;
      }

      #heatmapLabels {
        flex-direction: row-reverse !important;
        width: 100%;
        justify-content: space-between;
        margin-top: 8px !important;
        height: auto !important;
      }

      #heatmapLabels span {
        margin: 0;
        padding: 0;
      }

      #networkPlot {
        height: 350px !important;
      }

      /* mobile override for arrow */
      #indicatorArrow {
        border-left: 6px solid transparent !important;
        border-right: 6px solid transparent !important;
        border-top: 8px solid black !important;
        border-bottom: none !important;
        transform: translateX(-50%);
      }
    }

    /* Prevent two‑finger pinch from causing the entire page to scroll on mobile and desktop.  */
    #networkPlot {
      touch-action: none;
    }
  </style>
</head>
<body class="min-h-screen">

<div class="outer-container">

  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
    <h1 class="text-3xl font-bold text-gray-800">PQ‑Placement</h1>

    <div class="flex items-center gap-3">
      <select id="networkSelector"
              class="px-3 py-2 bg-white border border-gray-300 text-gray-700 font-semibold rounded shadow focus:outline-none focus:ring-2 focus:ring-red-500 cursor-pointer">
      </select>
    </div>
  </div>

  <div class="mb-4 flex flex-wrap items-center gap-6">
    <div class="flex items-center gap-2">
      <span class="text-gray-700 font-medium">Anzahl Messgeräte:</span>
      <div class="flex items-center gap-3 text-sm text-gray-700">
        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="deviceCount" value="1" class="accent-red-600"><span>1</span></label>
        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="deviceCount" value="2" class="accent-red-600"><span>2</span></label>
        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="deviceCount" value="3" class="accent-red-600"><span>3</span></label>
        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="deviceCount" value="4" class="accent-red-600"><span>4</span></label>
        <label class="flex items-center gap-1 cursor-pointer"><input type="radio" name="deviceCount" value="5" class="accent-red-600"><span>5</span></label>
      </div>
    </div>
  </div>

  <p class="text-gray-700 mb-6 text-sm">
    Klicke auf Knoten, um Messgeräte zu platzieren.
  </p>

  <div class="flex gap-8 items-stretch flex-col md:flex-row">

    <div class="flex-1 min-w-0 relative">

      <div id="loadingOverlay"
           class="absolute inset-0 flex items-center justify-center bg-gray-200 z-10 rounded-xl transition-opacity duration-300 hidden">
        <span class="text-gray-500 font-semibold animate-pulse text-lg">Lade Daten ...</span>
      </div>

      <div id="networkPlot"
           class="w-full h-[600px] md:h-[700px] bg-gray-200 rounded-xl overflow-hidden relative">
      </div>
    </div>

    <div id="heatmapWrapper" class="w-32 flex flex-col items-center md:w-32 relative">
      <div id="heatmapContainer" class="flex flex-col md:flex-row w-full md:w-auto gap-3 items-stretch relative">
        <div id="heatmapBar"
             class="h-[500px] w-8 rounded-full border border-gray-400 bg-gradient-to-t from-white via-red-400 to-red-800 relative">
          <div id="indicatorArrow" style="left: -12px; bottom: 0%;"></div>
        </div>
        <div id="heatmapLabels" class="flex flex-col justify-between text-xs text-gray-700 h-auto md:h-[500px]">
          <span>1.0</span><span>0.8</span><span>0.6</span><span>0.4</span><span>0.2</span><span>0.0</span>
        </div>
      </div>
      <div class="mt-4 text-[10px] text-center text-gray-700">Farbe = max. Sag‑Wert<br/>über alle gewählten Knoten</div>
      <div id="scoreBox" class="mt-6 w-full text-center text-gray-800 text-sm font-semibold">Observability: —</div>
      <div id="highscoreBox" class="mt-2 w-full text-center text-gray-800 text-sm font-semibold">Persönlicher Highscore: —</div>
    </div>
  </div>
</div>

<!--
  Separate script file keeps the markup clean and makes it easier to embed in other contexts.
  If this page is included in a Jekyll post, ensure the path to pq-placement.js is correct (e.g. use the same folder).
-->
<script src="pq-placement.js"></script>
</body>
</html>
